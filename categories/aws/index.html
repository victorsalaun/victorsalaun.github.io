<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Category: aws | Victor SALAUN &mdash; Devops Engineer </title>
    <meta property="og:title" content="Category: aws | Victor SALAUN &mdash; Devops Engineer " />
    <meta name="twitter:title" content="Category: aws | Victor SALAUN &mdash; Devops Engineer " />

    <meta name="description" content="Category: aws">
    <meta name="description" property="og:description" content="Category: aws" />
    <meta name="twitter:description" content="Category: aws" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:site" content="@your_handler" />
    
    <meta property="og:url" content="https://victorsalaun.github.io/categories/aws/" />

    <meta property="og:image" content="" />
    <meta name="twitter:image" content="" />

    <meta name="author" content="Victor SALAUN" />

    <meta name="copyright" content="Copyright by Victor SALAUN. All Rights Reserved." />

    <style>
        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 300;
            src: local('Roboto Light'), local('Roboto-Light'), url(https://fonts.gstatic.com/s/roboto/v15/Hgo13k-tfSpn0qi1SFdUfVtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 400;
            src: local('Roboto'), local('Roboto-Regular'), url(https://fonts.gstatic.com/s/roboto/v15/CWB0XYA8bzo0kSThX0UTuA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 700;
            src: local('Roboto Bold'), local('Roboto-Bold'), url(https://fonts.gstatic.com/s/roboto/v15/d-6IYplOFocCacKzxwXSOFtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 900;
            src: local('Roboto Black'), local('Roboto-Black'), url(https://fonts.gstatic.com/s/roboto/v15/mnpfi9pxYH-Go5UiibESIltXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 300;
            src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(https://fonts.gstatic.com/s/roboto/v15/7m8l7TlFO-S3VkhHuR0at44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 400;
            src: local('Roboto Italic'), local('Roboto-Italic'), url(https://fonts.gstatic.com/s/roboto/v15/vPcynSL0qHq_6dX7lKVByfesZW2xOQ-xsNqO47m55DA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 700;
            src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(https://fonts.gstatic.com/s/roboto/v15/t6Nd4cfPRhZP44Q5QAjcC44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 900;
            src: local('Roboto Black Italic'), local('Roboto-BlackItalic'), url(https://fonts.gstatic.com/s/roboto/v15/bmC0pGMXrhphrZJmniIZpY4P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }
    </style>
    
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    
    <link rel="stylesheet" href="https://victorsalaun.github.io/assets/css/main.css">

    <link rel="canonical" href="https://victorsalaun.github.io/categories/aws/">

    <link rel="alternate" type="application/rss+xml" title="" href="https://victorsalaun.github.io/feed.xml">
</head>

    <body>
        <div class="wrapper clear">
            <aside class="user-profile fixed" role="complementary">
    <div class="burger">
        <input class="trigger hidden" id="toggleBurger" type="checkbox" />
        <label for="toggleBurger">
            <span>Navigation</span>
        </label>
    </div>

    <div class="compact-header">
        <a href="https://victorsalaun.github.io"><img class="avatar" src="https://victorsalaun.github.io/assets/img/victor.jpg" /></a>
        <div class="my-info">
            <strong class="my-name">Victor SALAUN</strong>
            <span class="my-job-title">Devops Engineer</span>
        </div>
    </div>

    
        
        <div class="mainmenu">
            <a href="https://victorsalaun.github.io" >Home</a>
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        </div>
        
    

    <p class="about-me"></p>

    <ul class="socials">
        <li><a href="https://www.linkedin.com/in/victorsalaun/"><svg title="linkedin" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://victorsalaun.github.io/assets/svg/social-icons.svg#linkedin-icon"></use></svg></a></li><li><a href="https://github.com/victorsalaun"><svg title="github" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://victorsalaun.github.io/assets/svg/social-icons.svg#github-icon"></use></svg></a></li>

        

        
         <li><a href="https://victorsalaun.github.io/feed.xml"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://victorsalaun.github.io/assets/svg/social-icons.svg#rss-icon"></use></svg></a></li>
        
    </ul>
</aside>

            <main class="the-content" role="main">
                <div class="search" role="search">
    <div>
        <div class="show-results-count">0 Results</div>
        <div class="search-holder clear">
            <input type="text" id="search-input" placeholder="search for...">
        </div>
    </div>
    <ul id="results-container" class="results-container"></ul>
</div>


                <h1>Posts From Category: aws</h1>


<article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul class="clear">
            <li><time datetime="2018-01-25T21:51:00+01:00" itemprop="datePublished">25 Jan, 2018</time></li>
            
                <li class="cats">
                    
                        <a href="/categories/aws/">aws</a>
                    
                </li>
            
        </ul>
        <h2 itemprop="name headline"><a href="https://victorsalaun.github.io/aws/deploy-static-app-cloudfront-domain-https.html">Déployer un site web statique en https sur AWS</a></h2>
    </header>

    <div class="post-content">
        <p align="center">
    <img src="https://victorsalaun.github.io/assets/img/aws.jpg" title="aws.jpg" />
</p>

<h1 id="création-du-domaine-et-de-son-certificat">Création du domaine et de son certificat</h1>

<p>La première étape consiste à créer un domain et son certificat.</p>

<blockquote>
  <p>aws cloudformation deploy –stack-name domain-stack –template-file domain.cfn.yml –parameter-overrides DomainName=example.com –capabilities CAPABILITY_IAM –region us-east-1</p>
</blockquote>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2010-09-09"</span>

<span class="s">Description</span><span class="pi">:</span> <span class="s">Route53 Hosted Zone + Certificate</span>

<span class="s">Parameters</span><span class="pi">:</span>

  <span class="s">DomainName</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="s">Description</span><span class="pi">:</span> <span class="s">The DNS name of an Amazon Route 53 hosted zone</span>
    <span class="s">AllowedPattern</span><span class="pi">:</span> <span class="s">(?!-)[a-zA-Z0-9-.]{1,63}(?&lt;!-)</span>
    <span class="s">ConstraintDescription</span><span class="pi">:</span> <span class="s">must be a valid DNS zone name.</span>

<span class="s">Resources</span><span class="pi">:</span>

  <span class="s">DNS</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::Route53::HostedZone</span>
    <span class="s">Properties</span><span class="pi">:</span>
      <span class="s">HostedZoneConfig</span><span class="pi">:</span>
        <span class="s">Comment</span><span class="pi">:</span> <span class="kt">!Join</span> <span class="pi">[</span><span class="s1">'</span><span class="s">'</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">Hosted</span><span class="nv"> </span><span class="s">zone</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">'</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">DomainName</span><span class="pi">]]</span>
      <span class="s">Name</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">DomainName</span>

  <span class="s">DomainCertificate</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::CertificateManager::Certificate</span>
    <span class="s">Properties</span><span class="pi">:</span>
      <span class="s">DomainName</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">DomainName</span>
      <span class="s">DomainValidationOptions</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">DomainName</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">DomainName</span>
        <span class="s">ValidationDomain</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">DomainName</span>
      <span class="pi">-</span> <span class="s">DomainName</span><span class="pi">:</span> <span class="kt">!Join</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">'</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">*.'</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">DomainName</span> <span class="pi">]]</span>
        <span class="s">ValidationDomain</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">DomainName</span>
      <span class="s">SubjectAlternativeNames</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="kt">!Join</span> <span class="pi">[</span> <span class="s1">'</span><span class="s">'</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">*.'</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">DomainName</span> <span class="pi">]]</span></code></pre></figure>

<p>Lors du traitement de cette stack, il faut penser à vérifier ses mails afin de valider la création du certificat.</p>

<p>Une fois la stack créée, il est nécessaire de manuellement modifier les noms des serveurs DNS du domaine, je ne connais pas de solution industrialisée.</p>

<h1 id="création-du-sous-domain">Création du sous domain</h1>

<p>Maintenant qu’on a un domain valide, il est possible de créer autant de sous domaines qu’on veut aussi bien le www que rien.</p>

<p>Pour récupérer l’arn du certificat que l’on vient de créer :</p>

<blockquote>
  <p>aws acm list-certificates –region us-east-1</p>
</blockquote>

<p>La stack suivante permet de fournir un S3 qui est un dépôt de fichiers statiques, un CDN (CloudFront) et de lier le tout au domaine.</p>

<blockquote>
  <p>aws cloudformation deploy –stack-name subdomain-stack –template-file subdomain.cfn.yml –parameter-overrides AcmCertificateArn=arn:aws:cloudfront::99999999999:distribution/XXXXXXXXXXXX HostedZone=example.com Subdomain=www.example.com  –capabilities CAPABILITY_IAM –region eu-west-3</p>
</blockquote>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">AWSTemplateFormatVersion</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2010-09-09'</span>

<span class="s">Description</span><span class="pi">:</span> <span class="s">Route53 Subdomain</span>

<span class="s">Parameters</span><span class="pi">:</span>

  <span class="s">AcmCertificateArn</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="s">Description</span><span class="pi">:</span> <span class="s">Domain certificate arn.</span>
    <span class="s">AllowedPattern</span><span class="pi">:</span> <span class="s2">"</span><span class="s">arn:aws:acm:.*"</span>

  <span class="s">HostedZone</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="s">Description</span><span class="pi">:</span> <span class="s">The DNS name of an existing Amazon Route 53 hosted zone.</span>
    <span class="s">AllowedPattern</span><span class="pi">:</span> <span class="s">(?!-)[a-zA-Z0-9-.]{1,63}(?&lt;!-)</span>
    <span class="s">ConstraintDescription</span><span class="pi">:</span> <span class="s">must be a valid DNS zone name.</span>

  <span class="s">Subdomain</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">String</span>
    <span class="s">Description</span><span class="pi">:</span> <span class="s">The DNS name of an existing Amazon Route 53 hosted zone.</span>
    <span class="s">AllowedPattern</span><span class="pi">:</span> <span class="s">(?!-)[a-zA-Z0-9-.]{1,63}(?&lt;!-)</span>
    <span class="s">ConstraintDescription</span><span class="pi">:</span> <span class="s">must be a valid subdomain name.</span>

<span class="s">Mappings</span><span class="pi">:</span>

  <span class="s">Region2S3WebsiteSuffix</span><span class="pi">:</span>
    <span class="s">us-east-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-us-east-1.amazonaws.com</span>
    <span class="s">us-west-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-us-west-1.amazonaws.com</span>
    <span class="s">us-west-2</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-us-west-2.amazonaws.com</span>
    <span class="s">eu-west-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-eu-west-1.amazonaws.com</span>
    <span class="s">ap-northeast-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-ap-northeast-1.amazonaws.com</span>
    <span class="s">ap-northeast-2</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-ap-northeast-2.amazonaws.com</span>
    <span class="s">ap-southeast-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-ap-southeast-1.amazonaws.com</span>
    <span class="s">ap-southeast-2</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-ap-southeast-2.amazonaws.com</span>
    <span class="s">ap-south-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-ap-south-1.amazonaws.com</span>
    <span class="s">us-east-2</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-us-east-2.amazonaws.com</span>
    <span class="s">sa-east-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website-sa-east-1.amazonaws.com</span>
    <span class="s">cn-north-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website.cn-north-1.amazonaws.com.cn</span>
    <span class="s">eu-central-1</span><span class="pi">:</span>
      <span class="s">Suffix</span><span class="pi">:</span> <span class="s">.s3-website.eu-central-1.amazonaws.com</span>

<span class="s">Resources</span><span class="pi">:</span>

  <span class="s">WebsiteBucket</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::S3::Bucket</span>
    <span class="s">Properties</span><span class="pi">:</span>
      <span class="s">AccessControl</span><span class="pi">:</span> <span class="s">PublicRead</span>
      <span class="s">WebsiteConfiguration</span><span class="pi">:</span>
        <span class="s">IndexDocument</span><span class="pi">:</span> <span class="s">index.html</span>
        <span class="s">ErrorDocument</span><span class="pi">:</span> <span class="s">error.html</span>

  <span class="s">WebsiteBucketPolicy</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::S3::BucketPolicy</span>
    <span class="s">Properties</span><span class="pi">:</span>
      <span class="s">Bucket</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">WebsiteBucket</span>
      <span class="s">PolicyDocument</span><span class="pi">:</span>
        <span class="s">Version</span><span class="pi">:</span> <span class="s">2012-10-17</span>
        <span class="s">Statement</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">Sid</span><span class="pi">:</span> <span class="s">PublicReadForGetBucketObjects</span>
          <span class="s">Effect</span><span class="pi">:</span> <span class="s">Allow</span>
          <span class="s">Principal</span><span class="pi">:</span> <span class="s1">'</span><span class="s">*'</span>
          <span class="s">Action</span><span class="pi">:</span> <span class="s">s3:GetObject</span>
          <span class="s">Resource</span><span class="pi">:</span> <span class="kt">!Join</span> <span class="pi">[</span><span class="s1">'</span><span class="s">'</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">arn:aws:s3:::'</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">WebsiteBucket</span><span class="pi">,</span> <span class="nv">/*</span><span class="pi">]]</span>

  <span class="s">WebsiteCDN</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::CloudFront::Distribution</span>
    <span class="s">Properties</span><span class="pi">:</span>
      <span class="s">DistributionConfig</span><span class="pi">:</span>
        <span class="s">Comment</span><span class="pi">:</span> <span class="kt">!Join</span> <span class="pi">[</span><span class="s1">'</span><span class="s">'</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">CDN</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">'</span><span class="pi">,</span> <span class="kt">!Ref</span> <span class="nv">Subdomain</span><span class="pi">,</span> <span class="s1">'</span><span class="nv"> </span><span class="s">website'</span><span class="pi">]]</span>
        <span class="s">Aliases</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="kt">!Ref</span> <span class="s">Subdomain</span>
        <span class="s">Enabled</span><span class="pi">:</span> <span class="s">true</span>
        <span class="s">DefaultRootObject</span><span class="pi">:</span> <span class="s">index.html</span>
        <span class="s">IPV6Enabled</span><span class="pi">:</span> <span class="s">false</span>
        <span class="s">DefaultCacheBehavior</span><span class="pi">:</span>
          <span class="s">AllowedMethods</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">DELETE</span>
          <span class="pi">-</span> <span class="s">GET</span>
          <span class="pi">-</span> <span class="s">HEAD</span>
          <span class="pi">-</span> <span class="s">OPTIONS</span>
          <span class="pi">-</span> <span class="s">PATCH</span>
          <span class="pi">-</span> <span class="s">POST</span>
          <span class="pi">-</span> <span class="s">PUT</span>
          <span class="s">TargetOriginId</span><span class="pi">:</span> <span class="s">S3Origin</span>
          <span class="s">ForwardedValues</span><span class="pi">:</span>
            <span class="s">QueryString</span><span class="pi">:</span> <span class="s">false</span>
            <span class="s">Cookies</span><span class="pi">:</span>
              <span class="s">Forward</span><span class="pi">:</span> <span class="s">none</span>
          <span class="s">ViewerProtocolPolicy</span><span class="pi">:</span> <span class="s">redirect-to-https</span>
        <span class="s">PriceClass</span><span class="pi">:</span> <span class="s">PriceClass_100</span>
        <span class="s">Restrictions</span><span class="pi">:</span>
          <span class="s">GeoRestriction</span><span class="pi">:</span>
            <span class="s">RestrictionType</span><span class="pi">:</span> <span class="s">whitelist</span>
            <span class="s">Locations</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">FR</span>
        <span class="s">ViewerCertificate</span><span class="pi">:</span>
          <span class="s">AcmCertificateArn</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">AcmCertificateArn</span>
          <span class="s">SslSupportMethod</span><span class="pi">:</span> <span class="s">sni-only</span>
        <span class="s">Origins</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">DomainName</span><span class="pi">:</span> <span class="kt">!Join</span> <span class="pi">[</span><span class="s1">'</span><span class="s">'</span><span class="pi">,</span> <span class="pi">[</span><span class="kt">!Ref</span> <span class="nv">WebsiteBucket</span><span class="pi">,</span> <span class="s1">'</span><span class="s">.s3.amazonaws.com'</span><span class="pi">]]</span>
          <span class="s">Id</span><span class="pi">:</span> <span class="s">S3Origin</span>
          <span class="s">S3OriginConfig</span><span class="pi">:</span> <span class="pi">{}</span>

  <span class="s">WebsiteDNSName</span><span class="pi">:</span>
    <span class="s">Type</span><span class="pi">:</span> <span class="s">AWS::Route53::RecordSet</span>
    <span class="s">Properties</span><span class="pi">:</span>
      <span class="s">HostedZoneName</span><span class="pi">:</span> <span class="kt">!Join</span> <span class="pi">[</span><span class="s1">'</span><span class="s">'</span><span class="pi">,</span> <span class="pi">[</span><span class="kt">!Ref</span> <span class="nv">HostedZone</span><span class="pi">,</span> <span class="nv">.</span><span class="pi">]]</span>
      <span class="s">Name</span><span class="pi">:</span> <span class="kt">!Ref</span> <span class="s">Subdomain</span>
      <span class="s">Type</span><span class="pi">:</span> <span class="s">A</span>
      <span class="s">AliasTarget</span><span class="pi">:</span>
        <span class="s">HostedZoneId</span><span class="pi">:</span> <span class="s">Z2FDTNDATAQYW2</span>
        <span class="s">DNSName</span><span class="pi">:</span> <span class="kt">!GetAtt</span> <span class="pi">[</span><span class="nv">WebsiteCDN</span><span class="pi">,</span> <span class="nv">DomainName</span><span class="pi">]</span></code></pre></figure>

<p>La création du CDN est long, il faut s’armer de patience, mais c’est aussi le bon moment pour débuter le transfert du site vers S3.</p>

<p>Une fois la stack créée, le site est disponible à la fois en http et en https. Pour être exact, les requêtes http seront redirigées en https.</p>

<p>Transférer ses données vers S3 peut se faire facilement via l’interface ou bien en ligne de commande.</p>

<blockquote>
  <p>aws s3 ls –region eu-west-3</p>
</blockquote>

<blockquote>
  <p>aws s3 sync ./ s3://${WEBSITE_BUCKET} –region eu-west-3</p>
</blockquote>


        
            <p><a href="/aws/deploy-static-app-cloudfront-domain-https.html" role="button">Read More</a></p>
        
    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=Déployer un site web statique en https sur AWS&p[summary]=
    


Création du domaine et de son certificat

La première étape consiste à créer un domain et son certificat.


  aws cloudformation ...&p[url]=https://victorsalaun.github.io/aws/deploy-static-app-cloudfront-domain-https.html" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://victorsalaun.github.io/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://victorsalaun.github.io/aws/deploy-static-app-cloudfront-domain-https.html&text=
    


Création du domaine et de son certificat

La première étape consiste à créer un domain et son certificat.


  aws cloudformation ...&hashtags=aws," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://victorsalaun.github.io/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://victorsalaun.github.io/tag/aws">aws</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>

            </main>
        </div>

        <script src="https://victorsalaun.github.io/assets/js/jquery-1.12.2.min.js"></script>
<script src="https://victorsalaun.github.io/assets/js/backtotop.js"></script>
<script src="https://victorsalaun.github.io/assets/js/lunr.min.js"></script>
<script src="https://victorsalaun.github.io/assets/js/lunr-feed.js"></script>
<script src="https://victorsalaun.github.io/assets/js/jquery.fitvids.js"></script>
<script src="https://victorsalaun.github.io/assets/js/svg4everybody.min.js"></script>
<script src="https://victorsalaun.github.io/assets/js/scripts.js"></script>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-XXXXXXX-2', 'auto');
        ga('send', 'pageview');
    </script>

    </body>
</html>